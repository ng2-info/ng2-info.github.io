<!DOCTYPE html>
<html lang="ja-jp">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" Angular 2 RC.5がリリースされました &middot;  Angular2 Info" />
  	<meta property="og:site_name" content="Angular2 Info" />
  	<meta property="og:url" content="https://ng2-info.github.io/2016/08/angular-2-rc-5/" />

    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2016-08-10T21:13:11&#43;09:00" />

    
    <meta property="og:article:tag" content="Release" />
    
    <meta property="og:article:tag" content="RC" />
    
    

  <title>
     Angular 2 RC.5がリリースされました &middot;  Angular2 Info
  </title>

    <meta name="description" content="Angular2の最新情報を不定期更新！" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://ng2-info.github.io/favicon.png">
    <link rel="apple-touch-icon" href="https://ng2-info.github.io/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="https://ng2-info.github.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://ng2-info.github.io/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="https://ng2-info.github.io/css/overwrite.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />

    
      
          <link href="https://ng2-info.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Angular2 Info" />
      
      
    
    <meta name="generator" content="Hugo 0.15" />

    <link rel="canonical" href="https://ng2-info.github.io/2016/08/angular-2-rc-5/" />

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52362663-3', 'auto');
      ga('send', 'pageview');

    </script>
    

    
    <link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css">
    <script type="text/javascript" src="https://ng2-info.github.io/js/linkjuice.min.js"></script>
    <script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/">Top</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/tags/">Tags</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://github.com/ng2-info/ng2-info.github.io">Repository</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://blog.lacolaco.net">Author&#39;s Blog</a>
            </li>
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="https://ng2-info.github.io/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">





<header class="main-header post-head">
    <nav class="main-nav overlay clearfix">


      
        <a class="blog-logo" href="https://ng2-info.github.io/"><img src="https://ng2-info.github.io/img/ng2-info.png" alt="Home" /></a>
      
      
          <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
      
    </nav>

    <div class="vertical">
        <div class="main-header-content inner">
            <h1 class="page-title">Angular2 Info</h1>
            <h2 class="page-description">
                
            </h2>
        </div>
    </div>


</header>



<main class="content" role="main">




  <article class="post post">
    <header class="post-header">
      <nav class="breadcrumb">
        
        
        
        
        
        
        
        
        
        
        
      </nav>


        <h1 class="post-title">Angular 2 RC.5がリリースされました</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2016-08-10T21:13:11&#43;09:00">
            Aug 10, 2016
          </time>
        
         
          <span class="post-tag small"><a href="https://ng2-info.github.io/tags/release/">#Release</a></span>
         
          <span class="post-tag small"><a href="https://ng2-info.github.io/tags/rc/">#RC</a></span>
         
        </section>
    </header>

    <section class="post-content">




<p>どうも、らこです。ついにAngular 2のRC.5がリリースされました。<br />
2.0最終リリースに向けた最後の大規模アップデートということで、変更の量は凄まじいものがあります。<br />
<code>NgModule</code> APIを始めとした既存APIの刷新は、一見バージョンアップ対応のハードルは高そうに見えますが、<br />
RC.5に合わせた書き方に直していけば、これまでよりもわかりやすく直感的なAPIになっていることが感じられるはずです。</p>

<p>それでは重要な変更点をピックアップしていきます。</p>

<p><a href="https://github.com/angular/angular/blob/master/CHANGELOG.md#200-rc5-2016-08-09" target="_blank">2.0.0-RC.5</a></p>

<h2 id="ngmodule-について"><code>NgModule</code>について</h2>

<p>新しい<code>NgModule</code> APIについては、 <a href="/2016/07/preparing-for-ngmodule">こちらの記事</a>で簡単な解説をしているので、まずはそちらを読んでください。</p>

<h2 id="破壊的変更">破壊的変更</h2>

<p>まずは破壊的変更についてまとめておきます。</p>

<h3 id="bootstrappingに関する変更">bootstrappingに関する変更</h3>

<p>一番大きな変更は、アプリケーションのbootstrappingに関するAPIの変更です。<br />
<code>NgModule</code>を前提とした新しいAPIが標準となり、今までのコンポーネントベースのbootstrapingは非推奨になりました。</p>

<p>アプリケーションを実装するにあたって、まずはモジュールを作ることになります。モジュールは次のように<code>@NgModule</code>デコレータを使います。</p>

<pre><code class="language-ts">import {NgModule} from '@angular/core';

@NgModule({
  declarations: […], // モジュールに読み込むディレクティブ、コンポーネント、パイプ
  imports: [BrowserModule], // 依存するモジュール
  providers: […], // DIプロバイダ
  boostrap: [MainComponent], // アプリケーションのエントリポイントになるコンポーネント
})
class MyAppModule {}
</code></pre>

<p>こうして宣言したモジュールは、次のようにbootstrappingします。</p>

<pre><code class="language-ts">import {platformBrowserDynamic} from ‘@angular/platform-browser-dynamic’;

platformBrowserDynamic().bootstrapModule(MyAppModule);
</code></pre>

<p>AoT(Ahead of Time)コンパイルを利用する場合は、次のようになります</p>

<pre><code class="language-ts">import {platformBrowser} from ‘@angular/platform-browser’;

platformBrowser().bootstrapModuleFactory(MyAppModuleNgFactory);
</code></pre>

<h4 id="web-worker向けapiの変更">Web Worker向けAPIの変更</h4>

<p>これまでWeb Workerでアプリケーションを起動するには<code>bootstrapWorkerApp</code>を使っていましたが、<br />
<code>WorkerAppModule</code>と<code>workerAppPlatform()</code>を使って、モジュールをbootstrapすることになります。</p>

<p><code>bootstrapWorkerUi</code>についても、<code>WorkerUiModule</code>をインポートして、<code>workerUiPlatform()</code>でbootstrapします。</p>

<h4 id="server向けapiの変更">Server向けAPIの変更</h4>

<p><code>serverBootstrap</code>は廃止され、アプリケーションのモジュールを<code>serverDynamicPlatform()</code>でbootstrapすることになります</p>

<h3 id="compiler-に関する変更"><code>Compiler</code>に関する変更</h3>

<p>コンポーネントコンパイラは常に<code>Compiler</code>クラスでInjectするようになりました。<br />
<code>RuntimeCompiler</code>クラスや<code>OfflineCompiler</code>クラスを直接Injectすることはできません。</p>

<h3 id="applicationref-に関する変更"><code>ApplicationRef</code>に関する変更</h3>

<p>アプリケーションの主体がモジュールに移行したことから、<code>ApplicationRef</code>関連のAPIの多くが非推奨になりました。</p>

<h4 id="applicationref-waitforasyncinitializers-の廃止"><code>ApplicationRef#waitForAsyncInitializers</code>の廃止</h4>

<p>アプリケーションの初期化が完了したことを受け取るためのAPIだった<code>ApplicationRef#waitForAsyncInitializers</code>が廃止されました。<br />
代わりに<code>AppInitStatus#donePromise(): Promise</code>か、<code>AppInitStatus#done: boolean</code>を使います。<br />
<code>AppInitStatus</code>は新しく導入されたクラスで、Injection経由でインスタンスを取得できます。</p>

<h4 id="applicationref-registerbootstraplistener-の廃止"><code>ApplicationRef.registerBootstrapListener</code>の廃止</h4>

<p>bootstrapが完了した後に呼び出されるイベントリスナーを登録するためのAPIだった<code>ApplicationRef.registerBootstrapListener</code>が廃止されました。<br />
代わりに、<code>APP_BOOTSTRAP_LISTENER</code>トークンを使って、multi providerを設定します。</p>

<pre><code class="language-ts">[
    {
        provide: APP_BOOTSTRAP_LISTENER,
        multi: true,
        useValue: (cmp: ComponentRef) =&gt; {
            // bootstrapされたコンポーネントのComponentRefが渡される
        }
    }
]
</code></pre>

<h4 id="applicationref-dispose-の廃止"><code>ApplicationRef#dispose</code>の廃止</h4>

<p>アプリケーションを破棄する<code>ApplicationRef#dispose</code>が廃止されました。<br />
代わりにモジュールを破棄する<code>NgModuleRef#destroy</code>を使います。</p>

<h4 id="aplicationref-registerdisposelistener-の廃止"><code>AplicationRef#registerDisposeListener</code>の廃止</h4>

<p>アプリケーションが破棄されたイベントを受け取るためのAPIが廃止されました。<br />
代わりにモジュールのクラスで<code>ngOnDestroy</code>ライフサイクルメソッドを実装するか、<br />
<code>NgModuleRef</code>クラスをInjectして、<code>NgModuleRef#onDestroy</code>メソッドでイベントリスナーを登録します。</p>

<h4 id="applicationref-run-の廃止"><code>ApplicationRef#run</code>の廃止</h4>

<p><code>ApplicationRef#run</code>は廃止され、代わりに<code>NgZone#run</code>を直接使うようになります。</p>

<h4 id="applicationref-injector-の廃止"><code>ApplicationRef#injector</code>の廃止</h4>

<p><code>ApplicationRef#injector</code>は廃止され、代わりに<code>Injector</code>を直接Injectするか、<code>NgModuleRef#injector</code>を使います。</p>

<h4 id="applicationref-zone-の廃止"><code>ApplicationRef#zone</code>の廃止</h4>

<p><code>ApplicationRef#zone</code>は廃止され、<code>NgZone</code>を直接使います。</p>

<h3 id="disposeplatform-の廃止"><code>disposePlatform</code>の廃止</h3>

<p><code>disposePlatform</code>は<code>destroyPlatform</code>に名前が変わりました。<br />
全体として<code>dispose</code>から<code>destroy</code>に統一するためです。</p>

<p>同様に、<code>PlatformRef#dipose()</code>から<code>PlatformRef#destroy()</code>に、<br />
<code>PlatformRef#registerDisposeListener</code>から<code>PlatformRef.onDestroy</code>に、<br />
<code>PlaformRef#diposed</code>から<code>PlatformRef#destroyed</code>に、それぞれ改名されました。</p>

<h3 id="テンプレートスキーマに関する挙動の変更">テンプレートスキーマに関する挙動の変更</h3>

<p>デフォルトでは、テンプレート中の未知の要素に対するデータバインディングはエラーを起こすようになっています。<br />
ただし、<code>CUSTOM_ELEMENTS_SCHEMA</code>を有効にすると、要素名に<code>-</code>を含む場合はその要素をCustom Elementsとして扱い、既知の要素として扱います。</p>

<p><code>CUSTOM_ELEMENTS_SCHEMA</code>は<code>@NgModule</code>の<code>schemas</code>に設定します。</p>

<pre><code class="language-ts">@NgModule({
    declarations: [MyComponentThatUsesAWebComponent],
    imports: [BrowserModule],
    schemas: [CUSTOM_ELEMENTS_SCHEMA],
    boostrap:  [MyComponentThatUsesAWebComponent],
})
export class MyAppModule{}
</code></pre>

<h3 id="coreloadandbootstrap-corebootstrap-の廃止"><code>coreLoadAndBootstrap</code>/<code>coreBootstrap</code>の廃止</h3>

<p><code>coreLoadAndBootstrap</code>と<code>coreBootstrap</code>は廃止されました。代わりには<code>bootstrapModule</code>か<code>bootstrapModuleFactory</code>を使います。</p>

<h3 id="routeconfigと-declarations-に関する規定">RouteConfigと<code>declarations</code>に関する規定</h3>

<p>ルート設定に含まれるすべてのコンポーネントは、モジュールの<code>declarations</code>に含まれている必要があります。<br />
これはJITコンパイル、AoTコンパイル、遅延ロードによらず常に必要です。</p>

<h3 id="テスティングapiに関する変更">テスティングAPIに関する変更</h3>

<p><code>@angular/core/testing</code>をはじめとするテスティングAPIも、<code>NgModule</code>を前提としたAPIに刷新されました。</p>

<h4 id="testinjector-の廃止と-testbed-の導入"><code>TestInjector</code>の廃止と<code>TestBed</code>の導入</h4>

<p>これまでユニットテスト中のInjectionを管理していた<code>TestInjector</code>が廃止され、<br />
代わりにユニットテスト用のモジュールを管理する<code>TestBed</code> APIが導入されました。</p>

<p><code>withProviders</code>は<code>TestBed.withModule</code>に、<code>addProviders</code>は<code>TestBed.configureTestingModule</code>に変更されます。<br />
<code>TestComponentBuilder</code>も<code>TestBed.createComponent</code>に変更されます。</p>

<p>Example:</p>

<pre><code class="language-ts">import {TestBed} from '@angular/core/testing';

describe('TestComponent', () =&gt; {
  beforeEach(() =&gt; {
    // テスト用モジュールのセットアップ
    TestBed.configureTestingModule({
      declarations: [TestComponent]
    });
  });

  it('component test', async(() =&gt; {
    // Component設定の上書き
    TestBed.overrideComponent(TestComponent, {set: {
      template: '&lt;p&gt;Content&lt;/p&gt;'
    }});
    // コンポーネントのコンパイル
    TestBed.compileComponents().then(() =&gt; {
      // コンポーネントインスタンスの作成 
      var fixture = TestBed.createComponent(TestComponent);
      fixture.detectChanges();
      var compiled = fixture.debugElement.nativeElement;

      expect(compiled).toContainText('Content');
    });
  }));
});
</code></pre>

<p>テスト環境のセットアップを行う<code>setBaseTestProviders</code>も、<code>TestBed.initTestEnvironment()</code>に変更されます。</p>

<p>Before:</p>

<pre><code class="language-ts">import {setBaseTestProviders} from '@angular/core/testing';
import {
    TEST_BROWSER_DYNAMIC_PLATFORM_PROVIDERS,
    TEST_BROWSER_DYNAMIC_APPLICATION_PROVIDERS
} from '@angular/platform-browser-dynamic/testing';

setBaseTestProviders(
    TEST_BROWSER_DYNAMIC_PLATFORM_PROVIDERS,
    TEST_BROWSER_DYNAMIC_APPLICATION_PROVIDERS
);
</code></pre>

<p>After:</p>

<pre><code class="language-ts">import {TestBed} from '@angular/core/testing';
import {BrowserDynamicTestingModule, platformBrowserDynamicTesting} from '@angular/platform-browser-dynamic/testing';

TestBed.initTestEnvironment(
    BrowserDynamicTestingModule,
    platformBrowserDynamicTesting()
);
</code></pre>

<h3 id="ngmodel-の挙動の変更と-ユニットテストへの影響"><code>ngModel</code>の挙動の変更と、ユニットテストへの影響</h3>

<p><code>ngModel</code>は常に非同期的な挙動を取るようになりました。<br />
つまり、ユニットテスト時には<code>ComponentFixture#detectChanges</code>の呼び出しではなく、<br />
<code>ComponentFixture#whenStable</code>を使って非同期的に変更の反映を待つ必要があります。</p>

<p>Before:</p>

<pre><code class="language-ts">let fixture = TestBed.createComponent(InputComp);
fixture.detectChanges();

let inputBox = &lt;HTMLInputElement&gt; fixture.debugElement.query(By.css('input')).nativeElement;
expect(inputBox.value).toEqual('Original Name');
</code></pre>

<p>After:</p>

<pre><code class="language-ts">let fixture = TedBed.createComponent(InputComp);
fixture.whenStable().then(() =&gt; {
    let inputBox = &lt;HTMLInputElement&gt; fixture.debugElement.query(By.css('input')).nativeElement;
    expect(inputBox.value).toEqual('Original Name');
});
</code></pre>

<h3 id="formsのモジュール化">Formsのモジュール化</h3>

<p><code>@angular/forms</code>を使用するためのAPIが変わります。今後は各フォームAPI用のモジュールをインポートします。</p>

<p>Before:</p>

<pre><code class="language-ts">import {disableDeprecatedForms, provideForms} from @angular/forms;

bootstrap(App, [
  disableDeprecatedForms(),
  provideForms()
]);
</code></pre>

<p>After:</p>

<pre><code class="language-ts">import {DeprecatedFormsModule, FormsModule, ReactiveFormsModule} from @angular/common;

@NgModule({
  declarations: [MyComponent],
  imports: [BrowserModule, DeprecatedFormsModule],
  boostrap:  [MyComponent],
})
export class MyAppModule{}
</code></pre>

<h3 id="platform-pipes-と-platform-directives-の廃止"><code>PLATFORM_PIPES</code>と<code>PLATFORM_DIRECTIVES</code>の廃止</h3>

<p>どちらも<code>NgModule#declarations</code>を使うようになりました</p>

<h3 id="routerの挙動の変更">Routerの挙動の変更</h3>

<p>クエリパラメータやフラグメントなど、URLに付随する要素は、デフォルトでは保持されなくなりました。<br />
ナビゲーションの際に保持したい場合は、<code>preserveQueryParams</code>/<code>preserveFragments</code>オプションをtrueにします。</p>

<pre><code class="language-ts">router.navigate([&quot;/&quot;], { preserveQueryParams: true });
</code></pre>

<p>routerLinkの場合は、<code>[preserveQueryParams]</code>として設定します。</p>

<pre><code class="language-html">&lt;a routerLink=&quot;/&quot; [preserveQueryParams]=&quot;true&quot;&gt;top&lt;/a&gt;
</code></pre>

<h3 id="アニメーションのテンプレートシンタックスの変更">アニメーションのテンプレートシンタックスの変更</h3>

<p>アニメーションのトリガーの式は<code>@prop</code>という書き方でしたが、<code>[@prop]</code>に変更されました。</p>

<pre><code class="language-html">// 非推奨
&lt;div @trigger=&quot;expression&quot;&gt;&lt;/div&gt;

// 新しい書き方
&lt;div [@trigger]=&quot;expression&quot;&gt;&lt;/div&gt;
</code></pre>

<h3 id="ngupgrade関連の変更">ngUpgrade関連の変更</h3>

<p>ngUpgradeもモジュール対応しました。</p>

<p>Before:</p>

<pre><code class="language-ts">let upgradeAdapter = new UpgradeAdapter();
upgradeAdapter.addProviders([myProvidersArray);
</code></pre>

<p>After:</p>

<pre><code class="language-ts">@NgModule({
  providers: myProvidersArray
})
class MyModule {}

let upgradeAdapter = new UpgradeAdapter(MyModule);
</code></pre>

<h2 id="その他の変更">その他の変更</h2>

<p>破壊的変更以外にも要注意の変更はいくつもあるので、それぞれ見ていきます。</p>

<h3 id="core">core</h3>

<h4 id="ngforの挙動の修正">ngForの挙動の修正</h4>

<p><a href="https://github.com/angular/angular/commit/e18626b" target="_blank">e18626b</a></p>

<p>ngForの挙動が修正され、必要なときだけ要素の追加・移動・削除を行うようになりました。<br />
この変更はアニメーションに影響するものです。</p>

<h4 id="selector-を持たないコンポーネントを許容するように修正"><code>selector</code>を持たないコンポーネントを許容するように修正</h4>

<p><a href="https://github.com/angular/angular/commit/9b39e49" target="_blank">9b39e49</a></p>

<p>これまでは<code>selector</code>が設定されていないコンポーネントを動的に読み込んだとき、DOM上は<code>&lt;undefined&gt;</code>として展開されていましたが、<br />
今後は<code>&lt;ng-component&gt;</code>として展開されるようになりました。</p>

<h3 id="compiler">compiler</h3>

<h4 id="ngifの右辺でパイプが使えるように修正">ngIfの右辺でパイプが使えるように修正</h4>

<p><a href="https://github.com/angular/angular/commit/8efbcc9" target="_blank">8efbcc9</a></p>

<p><code>*ngIf</code>の右辺の式でパイプが使えるようになりました。</p>

<h4 id="safe-operator-の評価の挙動を修正">Safe Operator(<code>?.</code>)の評価の挙動を修正</h4>

<p><a href="https://github.com/angular/angular/commit/4ec2a30" target="_blank">4ec2a30</a></p>

<p><code>a?.b.c</code>という式について<code>a</code>がnullあるいはundefinedだった場合、これまでは<code>a</code>をnullと評価したあとに<code>b</code>の評価に進んでしまい、<br />
<code>a?.b?.c</code>と書かないとエラーになっていました。<br />
この修正により、<code>a</code>の時点でSafe Operatorが働いた場合はその先の評価を行わなずに全体を<code>null</code>とするように修正されました。</p>

<h3 id="common">common</h3>

<h4 id="currencypipe-の規定の挙動の変更"><code>CurrencyPipe</code>の規定の挙動の変更</h4>

<p><a href="https://github.com/angular/angular/commit/d455942" target="_blank">d455942</a></p>

<p><code>CurrencyPipe</code>の各パラメータの規定値が、Intl APIのデフォルトを使うようになりました。</p>

<h4 id="numberpipe-がstring型を許容するようになった"><code>NumberPipe</code>がstring型を許容するようになった</h4>

<p><a href="https://github.com/angular/angular/commit/f3dd91e" target="_blank">f3dd91e</a></p>

<p><code>NumberPipe</code>が文字列型の数値も許容するようになりました。</p>

<h3 id="http">http</h3>

<h4 id="httpヘッダの処理をcase-insensitiveに修正">HTTPヘッダの処理をcase-insensitiveに修正</h4>

<p><a href="https://github.com/angular/angular/commit/7f64782" target="_blank">7f64782</a></p>

<p>これまでケースセンシティブになっていたのが修正されました</p>

<h4 id="content-type-ヘッダの上書きをサポート"><code>content-type</code>ヘッダの上書きをサポート</h4>

<p><a href="https://github.com/angular/angular/commit/bdb5912" target="_blank">bdb5912</a></p>

<p><code>body</code>に渡されたオブジェクトの型から自動的に判別される<code>content-type</code>は、<br />
<code>headers</code>に明示的に指定されたもので上書きできるようになりました。</p>

<h4 id="arraybuffer-型と-blob-型のレスポンスをサポート"><code>arraybuffer</code>型と<code>blob</code>型のレスポンスをサポート</h4>

<p><a href="https://github.com/angular/angular/commit/1266460" target="_blank">1266460</a>, <a href="https://github.com/angular/angular/commit/76b8a49" target="_blank">76b8a49</a></p>

<p><code>Response#arrayBuffer()</code>と<code>Response#blob()</code>がサポートされました。</p>

<h4 id="optionsメソッドをサポート">OPTIONSメソッドをサポート</h4>

<p><a href="https://github.com/angular/angular/commit/0bd97ec" target="_blank">0bd97ec</a></p>

<p>HTTPのOPTIONSメソッドのための<code>Http#options()</code>が追加されました。</p>

<h3 id="router">router</h3>

<p>routerについては個別のチェンジログがあります</p>

<p><a href="https://github.com/angular/angular/blob/master/modules/@angular/router/CHANGELOG.md" target="_blank">Router CHANGELOG</a></p>

<h4 id="routermodule-の導入"><code>RouterModule</code>の導入</h4>

<p>Routerもモジュール化され、<code>RouterModule</code>をインポートするようになります。</p>

<pre><code class="language-ts">@NgModule({
    imports: [RouterModule.forRoot(appRoutes, {enableTracing: true})]
})
class MyAppModule {}
</code></pre>

<h4 id="クエリパラメータの値が空の時の挙動を修正">クエリパラメータの値が空の時の挙動を修正</h4>

<p><a href="https://github.com/angular/angular/commit/0d6cc17" target="_blank">0d6cc17</a></p>

<p>値が空(<code>?key=</code>)のクエリパラメータを含むURLで初回のルーティングを行うと、値に<code>true</code>がセットされてしまうバグを修正しました。</p>

<h4 id="canactivatechild-canload-の追加"><code>canActivateChild</code>/<code>canLoad</code>の追加</h4>

<p>ガードの種類に、すべての子ルートのアクティベーションをチェックする<code>canActivateChild</code>と、<br />
遅延ロードが可能かどうかをチェックする<code>canLoad</code>が追加されました</p>

<h4 id="routeroutlet-のイベントを追加"><code>RouterOutlet</code>のイベントを追加</h4>

<p><code>&lt;router-outlet&gt;</code>要素から<code>activate</code>イベントと<code>deactivate</code>イベントが発火されるようになりました。</p>

<h4 id="guardとresolverがpromiseをサポート">GuardとResolverがPromiseをサポート</h4>

<p>各種GaurdとResolverのインターフェースで、戻り値としてPromiseが使えるようになりました。<br />
Observableと同様に、Promiseを返した場合は完了するまでナビゲーションが待機されます。</p>

<h4 id="activateroute-が-routeconfig-を返せるようになった"><code>ActivateRoute</code>が<code>routeConfig</code>を返せるようになった</h4>

<p>現在アクティブなルートの設定を<code>ActivateRoute</code>から取得できます。</p>

<h4 id="queryparams-や-fragment-が-activateroute-から取得するようになった"><code>queryParams</code>や<code>fragment</code>が<code>ActivateRoute</code>から取得するようになった</h4>

<p>これまで<code>Router#routerState</code>から取得していたクエリパラメータやフラグメントは<code>ActivateRoute</code>から取得するようになりました</p>

<h3 id="forms">forms</h3>

<h4 id="ngform-reset-の追加"><code>NgForm#reset</code>の追加</h4>

<p><a href="https://github.com/angular/angular/commit/da8eb9f" target="_blank">da8eb9f</a></p>

<p>フォームを初期化する<code>NgForm#reset()</code>が追加されました</p>

<h4 id="multipleなselect要素で-change-イベントを使うように修正">multipleなselect要素で<code>change</code>イベントを使うように修正</h4>

<p><a href="https://github.com/angular/angular/commit/3cbded6" target="_blank">3cbded6</a></p>

<p>これまで<code>input</code>イベントで処理していたバグが修正されました。</p>

<h4 id="フォーム内のコントロールを簡単に取得するためのapiを追加">フォーム内のコントロールを簡単に取得するためのAPIを追加</h4>

<p><a href="https://github.com/angular/angular/commit/8d44999" target="_blank">8d44999</a></p>

<p>フォーム内のコントロールを名前で取得できる<code>get()</code>メソッドが追加されました。</p>

<pre><code class="language-ts">@Component({
  selector: 'my-app',
  template: `
    &lt;div&gt;
      &lt;form #f=&quot;ngForm&quot;&gt;
        &lt;input name=&quot;a&quot; ngModel&gt;
      &lt;/form&gt;
      &lt;button (click)=&quot;checkForm(f)&quot;&gt;Check Form&lt;/button&gt;
    &lt;/div&gt;
  `,
})
export class App {
  checkForm(f: NgForm) {
    f.form.get(&quot;a&quot;) // FormControl
  }
}
</code></pre>

<h4 id="コントロールに-invalid-pending-プロパティを追加">コントロールに<code>invalid</code>/<code>pending</code>プロパティを追加</h4>

<p><a href="https://github.com/angular/angular/commit/e0eea6c" target="_blank">e0eea6c</a></p>

<p>コントロールの状態を取得するプロパティが追加されました。</p>

<h3 id="animation">animation</h3>

<h4 id="component-host-プロパティでのアニメーショントリガーの設定をサポート"><code>Component#host</code>プロパティでのアニメーショントリガーの設定をサポート</h4>

<p><a href="https://github.com/angular/angular/commit/806a254" target="_blank">806a254</a></p>

<p><code>@Component</code>の<code>host</code>プロパティでアニメーションのトリガー設定ができるようになりました。<br />
この結果として、Routerによるナビゲーションにアニメーションを付与することができるようになります。<br />
<code>[@routeAnimation]</code>をtrueに設定しておくと、<code>routeAnimation</code>トリガーで、表示(<code>void =&gt; *</code>)と、離脱(<code>* =&gt; void</code>)のアニメーションを記述できます。</p>

<pre><code class="language-ts">@Component({
  selector: 'home',
  template: `Home`,
   host: {
     '[@routeAnimation]': 'true',
   },
  animations: [
    trigger('routeAnimation', [
      state('*', style({transform: 'translateX(0)', opacity: 1})),
      transition('void =&gt; *', [
        style({transform: 'translateX(-100%)', opacity: 0}),
        animate(1000)
      ]),
      transition('* =&gt; void', animate(1000, style({transform: 'translateX(100%)', opacity: 0})))
    ])
  ]
})
class HomeCmp {}
</code></pre>

<p>実際に動くサンプルは<a href="http://plnkr.co/edit/hH667v6ODDc28vBqCBvT?p=preview" target="_blank">こちら</a>です</p>

<iframe src="http://embed.plnkr.co/hH667v6ODDc28vBqCBvT/?show=preview" frameborder="0" width="100%" height="300"></iframe>  

<hr />

<p>RC.5の変更点のまとめは以上です。かなり抜粋しましたがそれでもこの量です。<br />
今回のアップデートではAoTコンパイルに関する情報も出てきていますが、この記事では扱いません。<br />
後日AoTコンパイルの手順については改めて書こうと思います。</p>

<p>それではFinalリリースまであと少し、頑張っていきましょう。よい夏を！</p>









    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="http://twitter.com/laco0416" style="background-image: url(https://ng2-info.github.io/img/authors/laco.png)"></a>
    </figure>

    





<section class="author">
  <h5>Author: <a href="http://twitter.com/laco0416">Suguru INATOMI</a></h5>
</section>



    
<section class="share">
    <h5>Share this post</h5>
    <a class="icon-twitter" style="font-size: 1.4em"
       href="https://twitter.com/share?text=Angular%202%20RC.5%e3%81%8c%e3%83%aa%e3%83%aa%e3%83%bc%e3%82%b9%e3%81%95%e3%82%8c%e3%81%be%e3%81%97%e3%81%9f%20-%20Angular2%20Info&amp;url=https%3a%2f%2fng2-info.github.io%2f2016%2f08%2fangular-2-rc-5%2f"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" style="font-size: 1.4em"
       href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fng2-info.github.io%2f2016%2f08%2fangular-2-rc-5%2f"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
</section>



  </footer>
</article>

</main>
<footer class="site-footer clearfix">
    <section class="copyright"><a href="">Angular2 Info</a> </section>
    
    <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a
            class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme
    </section>
    
</footer>
</div>
<script type="text/javascript" src="https://ng2-info.github.io/js/jquery.js"></script>
<script type="text/javascript" src="https://ng2-info.github.io/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="https://ng2-info.github.io/js/index.js"></script>

<script>
    linkjuice.init('article.post', {
        selectors: ['h2', 'h3', 'h4'],
        icon: ''
    });
</script>
</body>
</html>

